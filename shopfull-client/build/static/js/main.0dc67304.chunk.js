(this["webpackJsonpshopfull-client-new"]=this["webpackJsonpshopfull-client-new"]||[]).push([[0],{85:function(e,t,a){"use strict";a.r(t);var r=a(3),n=a(0),i=a.n(n),c=a(8),s=a.n(c),o=a(39),l=a(56),d=a(20),u=a(15),j=a(57),f=a.n(j),b=a(58),p=a.n(b),m=a(59),h=a(60),O=a(14),g="TOGGLE_FAVORITE",y="ADVANCE_FLYER_PAGE",x=function(){return{type:y}},v="LOAD_FLYERS_IN_PROGRESS",F="LOAD_FLYERS_SUCCESS",w=function(e){return{type:F,payload:{flyers:e}}},S="LOAD_FLYERS_FAILURE",N={isLoading:!1,data:[],page:1},L={flyers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case y:return Object(O.a)(Object(O.a)({},e),{},{page:e.page+1});case F:var n=r.flyers;return Object(O.a)(Object(O.a)({},e),{},{isLoading:!1,data:e.data.concat(n)});case v:return Object(O.a)(Object(O.a)({},e),{},{isLoading:!0});case S:return Object(O.a)(Object(O.a)({},e),{},{isLoading:!1});default:return e}},favoriteFlyers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[]},t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case g:var n=r.flyer,i=!!e.data.some((function(e){return e.id===n.id})),c=i?e.data.filter((function(e){return e.id!=n.id})):e.data.concat(n);return{data:c};default:return e}}},E={key:"root",storage:f.a,stateReconciler:p.a,whitelist:["favoriteFlyers"]},T=Object(u.combineReducers)(L),R=Object(o.a)(E,T),C=a(138),k=a(139),A=a(134),I=a(63),P=Object(I.a)({palette:{primary:{main:"#6200ee"}},typography:{fontFamily:"'Lato', sans-serif"}}),_=a(41),D=a(137),z=a(122),B=a(135),G=a(136),W=a(33),Y=a(64),J=a(140),M=a(127),U=a(62),V=a.n(U),K=a(128),q=a(141),H=a(61),Q=function(e){return e.favoriteFlyers.data},X=function(e){return e.flyers.page},Z=function(e){return e.flyers.isLoading},$=Object(H.a)((function(e){return e.flyers.data}),(function(e){return e})),ee=a(123),te=a(142),ae=a(125),re=a(126),ne=a(38),ie=a.n(ne),ce=Object(z.a)({fullList:{width:"auto",padding:".5rem 1rem"},listItem:{paddingLeft:".5rem",paddingRight:".5rem"}}),se=Object(d.b)((function(e){return{favoriteFlyers:Q(e)}}))((function(e){var t=e.favoriteFlyers,a=ce();return Object(r.jsx)(ee.a,{className:a.fullList,children:t.length?t.map((function(e,t){return Object(r.jsxs)(te.a,{button:!0,className:a.listItem,disableGutters:!0,children:[Object(r.jsx)(ae.a,{children:Object(r.jsx)(ie.a,{})}),Object(r.jsx)(re.a,{primary:e.title})]},t)})):Object(r.jsx)("div",{children:"Add some favorite flyers!"})})})),oe=a.p+"static/media/avatar.00fb0264.png",le=Object(z.a)({list:{width:250},drawerTop:{padding:"2rem 1rem 0.5rem"},title:{fontSize:"1.2rem",fontWeight:600},subTitle:{fontSize:"0.8rem"},avatar:{marginBottom:"1rem"}});function de(){var e=le(),t=i.a.useState({left:!1}),a=Object(Y.a)(t,2),n=a[0],c=a[1],s=function(e,t){return function(a){("keydown"!==a.type||"Tab"!==a.key&&"Shift"!==a.key)&&c(Object(O.a)(Object(O.a)({},n),{},Object(W.a)({},e,t)))}};return Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsx)(M.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",onClick:s("left",!0),children:Object(r.jsx)(V.a,{})}),Object(r.jsx)(J.a,{anchor:"left",open:n.left,onClose:s("left",!1),className:e.drawer,children:Object(r.jsxs)("div",{role:"presentation",onClick:s("left",!1),onKeyDown:s("left",!1),className:e.list,children:[Object(r.jsxs)("header",{className:e.drawerTop,children:[Object(r.jsx)(q.a,{alt:"Remy Sharp",className:e.avatar,src:oe}),Object(r.jsx)(_.a,{variant:"h5",className:e.title,children:"Favourites"}),Object(r.jsx)(_.a,{variant:"body1",className:e.subTitle,children:"The list of your preferred flyers"})]}),Object(r.jsx)(K.a,{}),Object(r.jsx)(se,{})]})})]})}var ue=a(133),je=a(129),fe=a(132),be=a(131),pe=a(130),me=Object(z.a)({root:{height:"100%",display:"flex",flexWrap:"wrap",flexDirection:"column"},media:{height:160,width:"100%"},cartContent:{paddingBottom:0,width:"100%"},retailer:{fontSize:"0.7rem",fontWeight:600,marginBottom:5,letterSpacing:1,textTransform:"uppercase"},title:{fontSize:"1.1rem",marginBottom:5,fontWeight:600},category:{fontSize:"0.9",textTransform:"capitalize",color:"#9c9c9c"},cardActions:{alignItems:"center",width:"100%",marginTop:"auto"},icon:{paddingTop:0}}),he=[a.p+"static/media/f1.23bf7fdd.jpg",a.p+"static/media/f2.3952875c.jpg",a.p+"static/media/f3.d7f74bde.jpg",a.p+"static/media/f4.132e4c4d.jpg",a.p+"static/media/f5.0f8d8e31.jpg",a.p+"static/media/f6.1629e78f.jpg"],Oe=Object(d.b)((function(e){return{favoriteFlyers:Q(e)}}))((function(e){var t=e.flyer,a=e.imageNum,n=e.onFavoritePressed,i=e.favoriteFlyers,c=me();return Object(r.jsxs)(je.a,{className:c.root,children:[Object(r.jsx)(pe.a,{className:c.media,image:he[a],title:"Paella dish"}),Object(r.jsxs)(be.a,{className:c.cartContent,children:[Object(r.jsx)(_.a,{variant:"h3",className:c.retailer,children:t.retailer}),Object(r.jsx)(_.a,{variant:"h2",className:c.title,children:t.title}),Object(r.jsx)(_.a,{variant:"body2",className:c.category,children:t.category})]}),Object(r.jsx)(fe.a,{disableSpacing:!0,className:c.cardActions,children:Object(r.jsx)(M.a,{"aria-label":"add to favorites",className:c.icon,onClick:function(){return n(t)},color:i.some((function(e){return e.id===t.id}))?"primary":"default",children:Object(r.jsx)(ie.a,{})})})]})})),ge=function(e){return function(t){var a=Object(n.useCallback)((function(e){new IntersectionObserver((function(e){e.forEach((function(e){e.intersectionRatio>0&&t(x())}))})).observe(e)}),[]);Object(n.useEffect)((function(){e.current&&a(e.current)}),[a,e])}},ye=a(32),xe=a.n(ye),ve=a(48),Fe=function(e){return function(t){t(function(e){return{type:g,payload:{flyer:e}}}(e))}},we=Object(z.a)((function(e){return{root:{flexGrow:1,padding:"2rem 0.5rem"}}})),Se=Object(d.b)((function(e){return{isLoading:Z(e),publishedFlyers:$(e),page:X(e)}}),(function(e){return{loadFlyers:function(t){return e(function(e){return function(){var t=Object(ve.a)(xe.a.mark((function t(a){var r,n;return xe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:v}),t.next=4,fetch("http://localhost:3000/api/v1/flyers?page=".concat(e,"&limit=12"));case 4:return r=t.sent,t.next=7,r.json();case 7:n=t.sent,a(w(n)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:S});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}(t))},useInfiniteScroll:function(t){return e(ge(t))},onFavoritePressed:function(t){return e(Fe(t))}}}))((function(e){var t=e.loadFlyers,a=e.isLoading,i=e.publishedFlyers,c=e.page,s=e.useInfiniteScroll,o=e.onFavoritePressed,l=we(),d=Object(n.useRef)(null);s(d),Object(n.useEffect)((function(){t(c)}),[c]);var u=0;return Object(r.jsx)("div",{className:l.root,children:Object(r.jsxs)(ue.a,{container:!0,spacing:2,children:[i.map((function(e,t){return Object(r.jsx)(ue.a,{xs:6,sm:3,item:!0,children:Object(r.jsx)(Oe,{flyer:e,onFavoritePressed:o,imageNum:u=u>=5?0:u+1})},t)})),a&&Object(r.jsx)("div",{style:{width:"100%"},children:Object(r.jsx)(A.a,{})}),Object(r.jsx)("div",{id:"page-bottom-boundary",style:{border:"1px solid red"},ref:d})]})})})),Ne=Object(z.a)((function(){return{title:{fontSize:"1.5rem"}}})),Le=function(){var e=Ne();return Object(r.jsxs)("div",{className:e.root,children:[Object(r.jsx)(B.a,{position:"static",children:Object(r.jsxs)(G.a,{children:[Object(r.jsx)(de,{}),Object(r.jsx)(_.a,{variant:"h1",className:e.title,children:"Shopfully"})]})}),Object(r.jsx)(D.a,{maxWidth:"md",children:Object(r.jsx)(Se,{})})]})},Ee=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,143)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,i=t.getLCP,c=t.getTTFB;a(e),r(e),n(e),i(e),c(e)}))},Te=Object(u.createStore)(R,Object(h.composeWithDevTools)(Object(u.applyMiddleware)(m.a))),Re=Object(o.b)(Te);s.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(d.a,{store:Te,children:Object(r.jsx)(l.PersistGate,{loading:Object(r.jsx)("div",{style:{width:"100%"},children:Object(r.jsx)(A.a,{})}),persistor:Re,children:Object(r.jsx)(C.a,{theme:P,children:Object(r.jsx)(k.a,{children:Object(r.jsx)(Le,{})})})})})}),document.getElementById("root")),Ee()}},[[85,1,2]]]);
//# sourceMappingURL=main.0dc67304.chunk.js.map